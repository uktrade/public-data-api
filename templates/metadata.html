{% extends "base.html" %}

{% block title %}{{ csvw['dc:title'] }} - {{ version }}{% endblock %}

{% block body %}
    <h1 class="govuk-heading-l">{{ csvw['dc:title'] }} - {{ version }}</h1>

    <p class="govuk-body">The dataset of {{ csvw['dc:title'] }} consists of {{ csvw['tables']|length }} table{% if csvw['tables']|length > 1 %}s.{% endif %}

    <ul class="govuk-list govuk-list--bullet">
    {% for table in csvw['tables'] %}
        <li>Table {{ loop.index }}: {{ table['dc:title'] }}</li>
    {% endfor %}
    </ul>

    {% for table in csvw['tables'] %}
    <h2 class="govuk-heading-m">Table {{ loop.index }}: {{ table['dc:title'] }}</h2>

    <p class="govuk-body">{{ table['dc:description'] }}</p>

    <p class="govuk-body">Download the <a href="{{ table['url'] }}" class="govuk-link">{{ table['dc:title'] }} table</a> (CSV, {{ table_sizes[table['id']] | filesizeformat }}).</p>

    <h3 class="govuk-heading-s">Columns</h3>

    <dl class="govuk-summary-list">
        {% for column in table['tableSchema']['columns']  %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">{{ column['name'] }}</dt>
            <dd class="govuk-summary-list__value">{{ column['dc:description'] }}</dd>
        </div>
        {% endfor %}
    </dl>
    {% endfor %}

{% endblock %}
